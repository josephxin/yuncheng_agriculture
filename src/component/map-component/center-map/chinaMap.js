import React, {
	Component
} from 'react';
import echarts from 'echarts';

import chinaJson from './china.json';

import Geo from './geo/geo';

class ChinaMap extends Component {

	constructor(props) {
		super(props);
		let me = this;
		me.geo = new Geo({
			mapLayoutSize: '145%', //
			mapAspectScale: '0.95', //和mapLayoutSize配合控制地图大小
			center: ['47%', '52%'], //地图位置
			mapType: 'china', //哪个城市的地图
			area1Color: '#074487', //下层颜色
			area1BorderColor: '#16548c', //下层边框颜色
			area1BorderWidth: 1, //下层边框宽度
			geoSilent: true, //为true时不响应鼠标事件，false响应鼠标事件
			mapFontColor: '#88a7d4', //地图上文字颜色
			mapLabelFontSize: 8, //地图上文字大小
			area2Color: '#124ea9',
			area2BorderColor: '#3fadee', //上层边框颜色
			area2BorderWidth: 1, //上层边框宽度
			area2BorderHoverColor: '#3fadee', //鼠标移上去的边框颜色
			colorStart: '#124ea9', //鼠标移上地图颜色渐变的起点
			colorEnd: '#124ea9' //鼠标移上地图颜色渐变的终点,如果不需要渐变，两个颜色取值一样即可
		});
		me._randomValue = function() {
			return Math.round(Math.random() * 20);
		};
		/*地图的区域颜色显示相关-初始数据*/
		me.initData = [{
				name: '北京',
				value: me._randomValue()
			},
			{
				name: '天津',
				value: me._randomValue()
			},
			{
				name: '上海',
				value: me._randomValue()
			},
			{
				name: '重庆',
				value: me._randomValue()
			},
			{
				name: '河北',
				value: me._randomValue()
			},
			{
				name: '河南',
				value: me._randomValue()
			},
			{
				name: '云南',
				value: me._randomValue()
			},
			{
				name: '辽宁',
				value: me._randomValue()
			},
			{
				name: '黑龙江',
				value: me._randomValue()
			},
			{
				name: '湖南',
				value: me._randomValue()
			},
			{
				name: '安徽',
				value: me._randomValue()
			},
			{
				name: '山东',
				value: me._randomValue()
			},
			{
				name: '新疆',
				value: me._randomValue()
			},
			{
				name: '江苏',
				value: me._randomValue()
			},
			{
				name: '浙江',
				value: me._randomValue()
			},
			{
				name: '江西',
				value: me._randomValue()
			},
			{
				name: '湖北',
				value: me._randomValue()
			},
			{
				name: '广西',
				value: me._randomValue()
			},
			{
				name: '甘肃',
				value: me._randomValue()
			},
			{
				name: '山西',
				value: me._randomValue()
			},
			{
				name: '内蒙古',
				value: me._randomValue()
			},
			{
				name: '陕西',
				value: me._randomValue()
			},
			{
				name: '吉林',
				value: me._randomValue()
			},
			{
				name: '福建',
				value: me._randomValue()
			},
			{
				name: '贵州',
				value: me._randomValue()
			},
			{
				name: '广东',
				value: me._randomValue()
			},
			{
				name: '青海',
				value: me._randomValue()
			},
			{
				name: '西藏',
				value: me._randomValue()
			},
			{
				name: '四川',
				value: me._randomValue()
			},
			{
				name: '宁夏',
				value: me._randomValue()
			},
			{
				name: '海南',
				value: me._randomValue()
			},
			{
				name: '台湾',
				value: me._randomValue()
			},
			{
				name: '香港',
				value: me._randomValue()
			},
			{
				name: '澳门',
				value: me._randomValue()
			}
		];
		me.state = {
			data: me.initData.slice()
		};

	}

	_setData(d) {
		let me = this;
		me._flag = true;
		me.setState({
			data: d
		});

		me._echartsInstance = echarts.init(me.refs.chinaMapRef);
		let initData = me.state.data.slice();
		let geoCoordMapPro = {
			'北京': [116.3809433, 39.9236145],
			'天津': [117.2034988, 39.13111877],
			'河北': [114.4897766, 38.04512787],
			'石家庄': [114.4897766, 38.04512787],
			'唐山': [118.2017288, 39.62533951],
			'秦皇岛': [119.5982971, 39.92430878],
			'邯郸': [114.4729538, 36.60151672],
			'邢台': [114.4950867, 37.06558991],
			'保定': [115.5001831, 38.85707092],
			'张家口': [114.8787766, 40.81744003],
			'承德': [117.9223404, 40.96760178],
			'沧州': [116.8607712, 38.30884171],
			'廊坊': [116.6898575, 39.51511002],
			'衡水': [115.7081909, 37.72782135],
			'山西': [112.5693512, 37.87111282],
			'太原': [112.5693512, 37.87111282],
			'大同': [113.2963333, 40.0971489],
			'阳泉': [113.5742569, 37.86065674],
			'长治': [113.1055679, 36.18191147],
			'晋城': [112.84272, 35.50651169],
			'朔州': [112.4232712, 39.31313324],
			'晋中': [112.7453613, 37.67613983],
			'运城': [110.9911499, 35.01391602],
			'忻州': [112.7315521, 38.39920807],
			'临汾': [111.5141678, 36.08282471],
			'吕梁': [111.1348114, 37.512043],
			'内蒙古': [111.6632996, 40.82094193],
			'呼和浩特': [111.6632996, 40.82094193],
			'包头': [109.8517075, 40.6664238],
			'乌海': [106.8148727, 39.67420197],
			'赤峰': [118.9498215, 42.26798248],
			'通辽': [122.2603302, 43.61156082],
			'鄂尔多斯': [109.7808671, 39.60844559],
			'呼伦贝尔': [119.7305603, 49.21152878],
			'巴彦淖尔': [107.3945694, 40.76234055],
			'乌兰察布': [113.0985184, 41.03116608],
			'兴安盟': [122.0381598, 46.08207144],
			'锡林郭勒盟': [116.0477155, 43.9331762],
			'阿拉善盟': [105.7289837, 38.8515317],
			'辽宁': [123.4116821, 41.7966156],
			'沈阳': [123.4116821, 41.7966156],
			'大连': [121.6008377, 38.91780472],
			'鞍山': [122.9843826, 41.11525726],
			'抚顺': [123.9295578, 41.84786606],
			'本溪': [123.7645035, 41.28758621],
			'丹东': [124.3814621, 40.13518143],
			'锦州': [121.1333695, 41.11112595],
			'营口': [122.2241516, 40.66835022],
			'阜新': [121.6488037, 42.00795364],
			'辽阳': [123.1617432, 41.26513672],
			'盘锦': [122.0476303, 41.18847656],
			'铁岭': [123.844429, 42.29558182],
			'朝阳': [120.4514694, 41.57785797],
			'葫芦岛': [120.8474808, 40.75334168],
			'吉林': [125.3154297, 43.89256287],
			'长春': [125.3154297, 43.89256287],
			'吉林': [126.5668182, 43.88667679],
			'四平': [124.377449, 43.16560745],
			'辽源': [125.1372833, 42.90859222],
			'通化': [125.9231262, 41.7232933],
			'白山': [126.421608, 41.93033218],
			'松原': [124.82204, 45.172604],
			'白城': [122.8395767, 45.61641693],
			'延边朝鲜族自治州': [129.5091262, 42.89120266],
			'黑龙江': [126.6433411, 45.74149323],
			'哈尔滨': [126.6433411, 45.74149323],
			'齐齐哈尔': [123.9592667, 47.34136963],
			'鸡西': [130.9477539, 45.2970047],
			'鹤岗': [130.2761993, 47.33728409],
			'双鸭山': [131.1521607, 46.6376915],
			'大庆': [125.0248566, 46.59545136],
			'伊春': [128.9043121, 47.72364426],
			'佳木斯': [130.36232, 46.81366348],
			'七台河': [130.8753967, 45.80927277],
			'牡丹江': [129.5984955, 44.58392334],
			'黑河': [127.4869385, 50.24448776],
			'绥化': [126.98349, 46.63701248],
			'大兴安岭': [124.5921351, 51.9239847],
			'上海': [121.4692688, 31.23817635],
			'江苏': [118.7727814, 32.04761505],
			'南京': [118.7727814, 32.04761505],
			'无锡': [120.2991333, 31.57723045],
			'徐州': [117.1856079, 34.26752853],
			'常州': [119.9502869, 31.78393364],
			'苏州': [120.6187286, 31.31645203],
			'南通': [120.8555679, 32.01506805],
			'连云港': [119.1668015, 34.60517883],
			'淮安': [119.14111, 33.502789],
			'盐城': [120.1351776, 33.38982773],
			'扬州': [119.4368362, 32.39188767],
			'镇江': [119.4442978, 32.20589829],
			'泰州': [119.91124, 32.495872],
			'宿迁': [118.29706, 33.958302],
			'浙江': [120.1592484, 30.26599503],
			'杭州': [120.1592484, 30.26599503],
			'宁波': [121.5412827, 29.87066841],
			'温州': [120.6502914, 28.01647568],
			'嘉兴': [120.7536316, 30.77111435],
			'湖州': [120.0971298, 30.86603928],
			'绍兴': [120.5739288, 30.01093102],
			'金华': [119.6522064, 29.11081696],
			'衢州': [118.8691788, 28.9584446],
			'舟山': [122.1016083, 30.02004242],
			'台州': [121.4205629, 28.6561185],
			'临海': [121.1184464, 28.84889221],
			'丽水': [119.9165573, 28.44883728],
			'安徽': [117.2757034, 31.86325455],
			'合肥': [117.2757034, 31.86325455],
			'芜湖': [118.3598328, 31.33449554],
			'蚌埠': [117.3613815, 32.93924332],
			'淮南': [117.0207291, 32.6166954],
			'马鞍山': [118.4807129, 31.72492409],
			'淮北': [116.7874985, 33.9704895],
			'铜陵': [117.813179, 30.92524719],
			'安庆': [117.0344315, 30.51264572],
			'黄山': [118.3090668, 29.72084427],
			'滁州': [118.3011627, 32.31653214],
			'阜阳': [115.8097305, 32.90220642],
			'宿州': [116.9701538, 33.6401329],
			'六安': [116.4927902, 31.75352287],
			'亳州': [115.7709, 33.879292],
			'池州': [117.4773331, 30.65686607],
			'宣城': [118.7586551, 30.94078918],
			'福建': [119.2978134, 26.07859039],
			'福州': [119.2978134, 26.07859039],
			'厦门': [118.0875168, 24.45743561],
			'莆田': [119.0103226, 25.43813705],
			'三明': [117.6012268, 26.22301292],
			'泉州': [118.5896378, 24.91591835],
			'漳州': [117.6530914, 24.51816368],
			'南平': [118.1691208, 26.64484215],
			'龙岩': [117.0303879, 25.10970306],
			'宁德': [119.5183182, 26.6664772],
			'江西': [115.8999176, 28.67599106],
			'南昌': [115.8999176, 28.67599106],
			'景德镇': [117.1179428, 29.19516754],
			'萍乡': [113.841423, 27.63298988],
			'九江': [115.984581, 29.72321129],
			'新余': [114.9293823, 27.80654717],
			'鹰潭': [117.0302811, 28.2455864],
			'赣州': [114.9336777, 25.85288239],
			'吉安': [114.9704285, 27.1062088],
			'宜春': [114.3746109, 27.79557419],
			'抚州': [116.3010483, 27.93483162],
			'上饶': [117.9634018, 28.45326614],
			'山东': [117.0056, 36.6670723],
			'济南': [117.0056, 36.6670723],
			'青岛': [120.3581696, 36.13386154],
			'淄博': [118.0560532, 36.7935791],
			'枣庄': [117.556282, 34.87264633],
			'东营': [118.4959564, 37.46191406],
			'烟台': [121.3799362, 37.53561401],
			'运城': [111.00699, 35.02628],
			'济宁': [116.576561, 35.40924072],
			'泰安': [117.1241074, 36.1871109],
			'威海': [122.1116867, 37.50076294],
			'日照': [119.4515533, 35.42756271],
			'莱芜': [117.66173, 36.205116],
			'临沂': [118.3379593, 35.06945038],
			'德州': [116.2878723, 37.45369339],
			'聊城': [115.9884262, 36.44943237],
			'滨州': [118.0217667, 37.36781311],
			'菏泽': [115.4457626, 35.24853897],
			'河南': [113.6500473, 34.7570343],
			'郑州': [113.6500473, 34.7570343],
			'开封': [114.3461685, 34.7851944],
			'洛阳': [112.4247971, 34.66804123],
			'平顶山': [113.3001938, 33.74362946],
			'安阳': [114.3500519, 36.09685135],
			'鹤壁': [114.1546707, 35.94008255],
			'新乡': [113.8685532, 35.30746841],
			'焦作': [113.2217865, 35.24735642],
			'濮阳': [115.0149536, 35.70189667],
			'许昌': [113.8215866, 34.02685928],
			'漯河': [114.0410919, 33.57250977],
			'三门峡': [111.1952591, 34.78076935],
			'南阳': [112.5375137, 32.99901962],
			'商丘': [115.6471863, 34.44358444],
			'信阳': [114.0677185, 32.13063049],
			'周口': [114.6372528, 33.62804031],
			'驻马店': [114.0356903, 32.97904205],
			'济源': [112.6027201, 35.06706997],
			'湖北': [114.2919388, 30.56751442],
			'武汉': [114.2919388, 30.56751442],
			'黄石': [115.0749893, 30.21379852],
			'十堰': [110.7827988, 32.65213013],
			'宜昌': [111.2852707, 30.70395279],
			'襄阳': [112.1411133, 32.04539871],
			'鄂州': [114.8811874, 30.40276718],
			'荆门': [112.2002106, 31.03021622],
			'孝感': [113.9113312, 30.92845535],
			'荆州': [112.2477875, 30.31733513],
			'黄冈': [114.8649292, 30.44901848],
			'咸宁': [114.2687378, 29.89432716],
			'随州': [113.36982, 31.715105],
			'恩施土家族苗族自治州': [109.4881804, 30.27218711],
			'仙桃': [113.4545113, 30.36252891],
			'潜江': [112.8993007, 30.40148025],
			'天门': [113.1661477, 30.66340805],
			'神农架林区': [110.6759643, 31.74451435],
			'湖南': [112.9812698, 28.20082474],
			'长沙': [112.9812698, 28.20082474],
			'株洲': [113.1520615, 27.85422325],
			'湘潭': [112.9150238, 27.87335014],
			'衡阳': [112.5993576, 26.90055466],
			'邵阳': [111.4773789, 27.25023651],
			'岳阳': [113.0980682, 29.37461853],
			'常德': [111.6876297, 29.03820992],
			'张家界': [110.4814835, 29.13187981],
			'益阳': [112.3340683, 28.60197067],
			'郴州': [113.0286484, 25.80229187],
			'永州': [111.6121979, 26.2112999],
			'怀化': [109.9542313, 27.54740715],
			'娄底': [111.9938965, 27.74133492],
			'湘西土家族苗族自治州': [109.7389287, 28.31173554],
			'广东': [113.2614288, 23.11891174],
			'广州': [113.2614288, 23.11891174],
			'韶关': [113.6053925, 24.80877686],
			'深圳': [114.110672, 22.55639648],
			'珠海': [113.5682602, 22.27258873],
			'汕头': [116.6837997, 23.36269188],
			'佛山': [113.1145172, 23.03487778],
			'江门': [113.0847473, 22.59119034],
			'湛江': [110.3992233, 21.19499779],
			'茂名': [110.8888474, 21.67071724],
			'肇庆': [112.4514084, 23.05788231],
			'惠州': [114.3924027, 23.08795738],
			'梅州': [116.1079407, 24.31450081],
			'汕尾': [115.3640137, 22.77868652],
			'河源': [114.6938171, 23.73484039],
			'阳江': [111.9578934, 21.84523392],
			'清远': [113.0212631, 23.71959686],
			'东莞': [113.7487717, 23.0485363],
			'中山': [113.3714523, 22.52685356],
			'潮州': [116.63666, 23.667706],
			'揭阳': [116.34977, 23.542976],
			'云浮': [112.03999, 22.933193],
			'广西': [108.3117676, 22.80654335],
			'南宁': [108.3117676, 22.80654335],
			'柳州': [109.4028091, 24.31040573],
			'桂林': [110.2866821, 25.28188324],
			'梧州': [111.3059464, 23.48661995],
			'北海': [109.1191711, 21.47979736],
			'防城港': [108.35658, 21.768936],
			'钦州': [108.6147003, 21.94986916],
			'贵港': [109.60844, 23.099092],
			'玉林': [110.1414719, 22.63189697],
			'百色': [106.6121063, 23.90158272],
			'贺州': [111.53455, 24.417259],
			'河池': [108.0516281, 24.69689179],
			'来宾': [109.23294, 23.73144],
			'崇左': [107.35506, 22.420197],
			'海南': [110.3465118, 20.03179359],
			'海口': [110.3465118, 20.03179359],
			'三亚': [109.5078201, 18.23404312],
			'三沙': [112.33356, 16.83272],
			'儋州': [109.5806849, 19.52092966],
			'五指山': [109.5169672, 18.77516377],
			'琼海': [110.4746526, 19.25839642],
			'文昌': [110.797742, 19.54330274],
			'万宁': [110.3897474, 18.79532292],
			'东方': [108.6536594, 19.09613826],
			'定安': [110.3590789, 19.68133946],
			'屯昌': [110.1034735, 19.35182579],
			'澄迈': [110.0048522, 19.73847934],
			'临高': [109.690764, 19.91242821],
			'白沙': [109.4516753, 19.22543478],
			'昌江': [109.0555816, 19.29827945],
			'乐东': [109.1736131, 18.7498679],
			'陵水': [110.0371871, 18.50595483],
			'保亭': [109.7025825, 18.63904542],
			'琼中': [109.8382244, 19.03322394],
			'重庆': [106.5103378, 29.55817604],
			'四川': [104.0817566, 30.66105652],
			'成都': [104.0817566, 30.66105652],
			'自贡': [104.7763519, 29.36772156],
			'攀枝花': [101.6984177, 26.55479813],
			'泸州': [105.4378433, 28.88199425],
			'德阳': [104.3915482, 31.13044548],
			'绵阳': [104.7485504, 31.45634842],
			'广元': [105.8317032, 32.44396973],
			'遂宁': [105.5697098, 30.50339317],
			'内江': [105.0534363, 29.57756805],
			'乐山': [103.7514038, 29.56822395],
			'南充': [106.0816269, 30.79582214],
			'眉山': [103.83146, 30.050497],
			'宜宾': [104.6168671, 28.77025604],
			'广安': [106.63175, 30.474428],
			'达州': [107.5003433, 31.22469711],
			'雅安': [102.9826965, 29.98229408],
			'巴中': [106.75476, 31.849014],
			'资阳': [104.65019, 30.122671],
			'阿坝藏族羌族自治州': [102.2247375, 31.89937935],
			'甘孜藏族自治州': [101.962514, 30.04930605],
			'凉山彝族自治州': [102.2674383, 27.88162244],
			'贵州': [106.7113724, 26.57687378],
			'贵阳': [106.7113724, 26.57687378],
			'六盘水': [104.8732529, 26.5767746],
			'遵义': [106.9293976, 27.69538689],
			'安顺': [105.9260712, 26.24425888],
			'毕节': [105.2824173, 27.3062954],
			'铜仁': [109.1926804, 27.72216606],
			'黔西南布依族苗族自治州': [104.9043531, 25.08987278],
			'黔东南苗族侗族自治州': [107.9841392, 26.5836279],
			'黔南布依族苗族自治州': [107.5222592, 26.25427309],
			'云南': [102.704567, 25.04384422],
			'昆明': [102.704567, 25.04384422],
			'曲靖': [103.7947006, 25.49616623],
			'玉溪': [102.5332336, 24.35497284],
			'保山': [99.16872406, 25.11680222],
			'昭通': [103.7149277, 27.34227943],
			'丽江': [100.2342529, 26.87666512],
			'普洱': [100.9752121, 22.79548073],
			'临沧': [100.0878067, 23.8799305],
			'楚雄彝族自治州': [101.5276607, 25.04494301],
			'红河哈尼族彝族自治州': [103.3755878, 23.36421652],
			'文山壮族苗族自治州': [104.2150486, 23.39868766],
			'西双版纳傣族自治州': [100.7973892, 22.0074942],
			'大理白族自治州': [100.2676255, 25.60646837],
			'德宏傣族景颇族自治州': [98.58484387, 24.4323115],
			'怒江傈僳族自治州': [98.85671501, 25.81753271],
			'迪庆藏族自治州': [99.70302652, 27.81906659],
			'西藏': [91.11445308, 29.64411352],
			'拉萨': [91.11445308, 29.64411352],
			'日喀则': [88.88110958, 29.26701395],
			'昌都': [97.17220509, 31.14069782],
			'林芝': [94.36153102, 29.64893975],
			'山南': [91.77308713, 29.23701982],
			'那曲': [92.0513207, 31.47611103],
			'阿里': [81.14540521, 30.40052298],
			'陕西': [108.949028, 34.26168442],
			'西安': [108.949028, 34.26168442],
			'铜川': [109.0572815, 35.07545853],
			'宝鸡': [107.1383591, 34.38228607],
			'咸阳': [108.7101288, 34.33721542],
			'渭南': [109.5008392, 34.50152588],
			'延安': [109.471283, 36.59387207],
			'汉中': [107.0343933, 33.07814789],
			'榆林': [109.7574463, 38.29727554],
			'安康': [109.0257874, 32.68986511],
			'商洛': [109.9403909, 33.87035105],
			'甘肃': [103.7500534, 36.06803894],
			'兰州': [103.7500534, 36.06803894],
			'嘉峪关': [98.27471161, 39.80265427],
			'金昌': [102.1657486, 38.49519348],
			'白银': [104.1837769, 36.53941727],
			'天水': [105.7152405, 34.58426666],
			'武威': [102.633461, 37.9269104],
			'张掖': [100.4502869, 38.93505859],
			'平凉': [106.6830673, 35.53551865],
			'酒泉': [98.51111603, 39.74496841],
			'庆阳': [107.6362305, 35.73855972],
			'定西': [104.6185684, 35.57523727],
			'陇南': [104.92928, 33.39484],
			'临夏回族自治州': [103.2108906, 35.60121067],
			'甘南藏族自治州': [102.9109863, 34.98324974],
			'青海': [101.7778162, 36.61728828],
			'西宁': [101.7778162, 36.61728828],
			'海东': [102.4017109, 36.48207227],
			'海北藏族自治州': [100.9009262, 36.95451784],
			'黄南藏族自治州': [102.0150337, 35.51988388],
			'海南藏族自治州': [100.6203395, 36.28660837],
			'果洛藏族自治州': [100.2447092, 34.47138225],
			'玉树藏族自治州': [97.00645511, 33.00525219],
			'海西蒙古族藏族自治州': [97.37119774, 37.37707972],
			'宁夏': [106.2719421, 38.46800995],
			'银川': [106.2719421, 38.46800995],
			'石嘴山': [106.3820572, 39.02428055],
			'吴忠': [106.1991119, 37.98549652],
			'固原': [106.2785873, 36.01325989],
			'中卫': [105.18661, 37.513252],
			'新疆': [89.1895474, 42.95130195],
			'乌鲁木齐': [87.60611725, 43.79093933],
			'克拉玛依': [84.86360931, 45.59651184],
			'吐鲁番': [89.1895474, 42.95130195],
			'哈密': [93.51536928, 42.81854115],
			'昌吉回族自治州': [87.30817902, 44.01114114],
			'博尔塔拉蒙古自治州': [82.06674632, 44.90603596],
			'巴音郭楞蒙古自治州': [86.14517515, 41.76404026],
			'阿克苏': [80.2600596, 41.1684029],
			'克孜勒苏柯尔克孜自治州': [76.16660835, 39.71529724],
			'喀什': [75.98973068, 39.47039628],
			'和田': [79.92243983, 37.11429217],
			'伊犁': [81.32412996, 43.91686827],
			'塔城': [82.98043953, 46.74531234],
			'阿勒泰': [88.14031038, 47.8456187],
			'石河子': [86.078911, 44.30652036],
			'阿拉尔': [81.28064163, 40.54795812],
			'图木舒克': [79.06901071, 39.8649427],
			'五家渠': [87.54014426, 44.16797119],
			'北屯': [87.80014797, 47.36328619],
			'铁门关': [85.67585289, 41.86869689],
			'双河': [82.35500262, 44.84417562],
			'可克达拉': [81.04474154, 43.94797595],
			'昆玉': [79.29125037, 37.20942446],
			'台湾': [120.960515, 23.69781],
			'香港': [114.109497, 22.396428],
			'澳门': [113.5440083, 22.20167546],
		};
		let effectScatterData = [];
		let linesData = [];
		let centerCity = {
			name: '运城',
			value: geoCoordMapPro['运城'].concat(1),
			symbol: 'circle',
			symbolSize: [8, 7]
		};
		effectScatterData.push(centerCity);
		for(let i in geoCoordMapPro) {
			initData.forEach(function(item, index) {
				if(item.name.indexOf(i) > -1) {
					// console.log(item);
					if(geoCoordMapPro[i] && geoCoordMapPro[centerCity.name]) {
						linesData.push({
							fromName: i,
							toName: centerCity.name,
							all: item,
							coords: item.flow ? [geoCoordMapPro[i], geoCoordMapPro[centerCity.name]] : [geoCoordMapPro[centerCity.name], geoCoordMapPro[i]]
						});
					}
					if(i && geoCoordMapPro[i]) {
						effectScatterData.push({
							name: i,
							value: geoCoordMapPro[i].concat(item.value),
							all: item,
							symbol: 'circle',
							symbolSize: [7, 5]
						});
					}
				}
			});
		}
		//console.log(effectScatterData,linesData)
		me._initEchartsOption(effectScatterData, linesData);
	}

	_flag = false;
	_tooltipTimer = null;
	_echartsInstance = undefined;
	_defaultAreaIndex = -1;

	componentDidUpdate() {
		
	}

	_initEchartsOption(effectScatterData, linesData) {
		let me = this;

		let option = {
			tooltip: {
				show: true
			},
			geo: me.geo.geo,
			series: [{
					name: '',
					type: 'map',
					mapType: 'china',
					geoIndex: 1,
					z: 2,
					zlevel: 2,
					label: {
						normal: {
							show: true,
							color: '#fff',
							fontSize: 22
						},
						emphasis: {
							show: true,
							color: '#fff',
							fontSize: 22
						}
					},
					tooltip: {
						show: false
					},
					data: me.initData.slice()
				},
				{
					name: '',
					type: 'effectScatter',
					coordinateSystem: 'geo',
					zlevel: 3,
					z: 3,
					symbol: 'circle',
					//symbolOffset: [0, -18],
					itemStyle: {
						normal: {
							color: '#fefa92'
						}
					},
					rippleEffect: {
						period: 12,
						scale: 2.5,
						brushType: 'stroke'
					},
					label: {
						normal: {
							show: false,
							color: '#fff'
						}
					},
					tooltip: {
						show: true,
						trigger: 'item',
						formatter: function(d) {
							if(d.data.all) {
								return d.marker + d.data.all.name;
							} else {
								return d.marker + d.name;
							}
						}
					},
					data: effectScatterData
				}, {
					name: '',
					type: 'lines',
					zlevel: 4,
					effect: {
						show: true,
						period: 6,
						trailLength: 0.7,
						color: '#fff',
						symbolSize: 1
					},
					lineStyle: {
						normal: {
							color: '#22ff7f',
							width: 0,
							curveness: 0.2
						}
					},
					tooltip: {
						show: false,
						trigger: 'item'
					},
					data: linesData
				},
				{
					name: '',
					type: 'lines',
					zlevel: 5,
					symbol: ['none', 'none'],
					symbolSize: 10,
					effect: {
						show: true,
						period: 6,
						trailLength: 0.2,
						symbol: 'roundRect',
						symbolSize: [3, 8]
					},
					lineStyle: {
						normal: {
							color: '#22ff7f',
							width: 1,
							opacity: 0.6,
							curveness: 0.2
						}
					},
					tooltip: {
						show: false,
						trigger: 'item'
					},
					data: linesData
				}
			]
		};
		me._echartsInstance.showLoading();
		echarts.registerMap('china', chinaJson);
		me._echartsInstance.hideLoading();
		me._echartsInstance.setOption(option, true);

	}

	componentDidMount() {

		let me = this;
		me._echartsInstance = echarts.init(me.refs.chinaMapRef);
		let initData = me.state.data.slice();
		let geoCoordMapPro = {
			'运城': [111.00699, 35.02628],
			'山西': [112.4121, 38.6611],
			'河南': [113.4668, 35.8818],
			'山东': [118.7402, 37.9307],
			'黑龙江': [128.1445, 48.5156],
			'吉林': [126.4746, 44.5938],
			'辽宁': [122.3438, 42.3889],
			'内蒙古': [111.747176, 42.852351],
			'河北': [115.4004, 39.2688],
			'北京': [116.4551, 41.9539],
			'江苏': [120.0586, 33.915],
			'安徽': [117.2461, 33.0361],
			'浙江': [120.498, 30.6918],
			'福建': [118.3008, 26.9277],
			'广东': [113.4668, 25.2876],
			'广西': [108.2813, 24.6426],
			'云南': [101.9652, 23.6807],
			'重庆': [107.7539, 31.1904],
			'四川': [102.9199, 30.1904],
			'西藏': [88.7695, 31.6846],
			'新疆': [84.9023, 41.748],
			'青海': [96.2402, 35.4199],
			'甘肃': [95.7129, 41.166],
			'宁夏': [105.9961, 38.3096],
			'陕西': [109.5996, 35.6396],
			'贵州': [106.645486, 28.122376],
			'江西': [116.0156, 28.99],
			'湖南': [111.5332, 29.3779],
			'湖北': [112.2363, 32.7572],
			'天津': [117.23137, 40.61652],
			'上海': [121.497212, 32.458404],
			'海南': [109.9512, 20.2041]
		};
		let effectScatterData = [];
		let linesData = [];
		let centerCity = {
			name: '运城',
			value: geoCoordMapPro['运城'].concat(1),
			symbol: 'circle',
			symbolSize: [8, 7]
		};
		effectScatterData.push(centerCity);
		for(let i in geoCoordMapPro) {
			let effectScatter = {};
			let lines = {};
			initData.forEach(function(item, index) {
				if(item.name.indexOf(i) > -1) {
					// console.log(item);
					effectScatter.name = i;
					effectScatter.value = geoCoordMapPro[i].concat(item.value);
					effectScatter.all = item;
					effectScatter.symbol = 'circle';
					effectScatter.symbolSize = [7, 5];

					lines.fromName = i;
					lines.toName = centerCity.name;
					lines.all = item;
					lines.coords = [geoCoordMapPro[centerCity.name], geoCoordMapPro[i]];

					if(geoCoordMapPro[i] && geoCoordMapPro[centerCity.name]) {
						linesData.push(lines);
					}
				}
			});
			if(effectScatter.name && geoCoordMapPro[effectScatter.name]) {
				effectScatterData.push(effectScatter);
			}
		}

		me._initEchartsOption(effectScatterData, linesData);
	}

	componentWillUnmount() {
		let me = this;
		if(me._echartsInstance) {
			me._echartsInstance.dispose();
			me._echartsInstance = undefined;
		}
	}

	render() {
		let me = this;
		return(
			<div style={me.props.style}>
        <div ref='chinaMapRef' style={me.props.style}>
        </div>
      </div>
		);
	}
}

export default ChinaMap;