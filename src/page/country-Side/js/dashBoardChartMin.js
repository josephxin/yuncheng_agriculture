/* eslint-disable */
import t,{useRef as a,useState as r,useEffect as n}from"react";import{select as e,arc as o}from"d3";function i(t,a){return function(t){if(Array.isArray(t))return t}(t)||function(t,a){var r=[],n=!0,e=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!a||r.length!==a);n=!0);}catch(t){e=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(e)throw o}}return r}(t,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}export default function(l){var d=Math.cos,f=Math.sin,s=Math.PI;function c(t){return t*s/180}var p=a(null),u=i(r(null),2),y=u[0],g=u[1];return n(function(){!function(){var t=p.current,a=l.width||300,r=l.height||300,n=-(s/2+s/6),i=(s/2+s/6-n)/40,c=e(t).append("svg").attr("width",a).attr("height",r),u=c.append("g").attr("transform","translate(".concat(a/2,",").concat(r/2,")")),y=u.append("defs"),x=y.append("linearGradient").attr("id","myGradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");x.append("stop").attr("offset",0).attr("style","stop-color:#fffc00"),x.append("stop").attr("offset",1).attr("style","stop-color:#ff7200");var m=y.append("linearGradient").attr("id","myRadialGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");m.append("stop").attr("offset",.2).attr("style","stop-color:rgba(255,255,255,0)"),m.append("stop").attr("offset",1).attr("style","stop-color:rgba(7,243,255,0.8)");for(var h=112,A=o().innerRadius(h).outerRadius(120),v=[],b=0;40>=b;b++)v.push({startAngle:n+i*b,endAngle:n+i*b+i});var R=u.selectAll("g").data(v).enter().append("g").attr("class",function(t,a){return"g"+a}).each(function(t,a){t.x=92*f(t.startAngle),t.y=92*-d(t.startAngle),(a%=4)?(t.x1=106*f(t.startAngle),t.y1=106*-d(t.startAngle),t.x2=f(t.startAngle)*h,t.y2=-d(t.startAngle)*h):(t.x1=102*f(t.startAngle),t.y1=102*-d(t.startAngle),t.x2=f(t.startAngle)*h,t.y2=-d(t.startAngle)*h)});R.append("path").attr("d",function(t,a){return 40===a?void 0:A(t)}).attr("fill","#07ecf6"),R.append("line").attr("x1",function(t){return t.x1}).attr("y1",function(t){return t.y1}).attr("x2",function(t){return t.x2}).attr("y2",function(t){return t.y2}).attr("stroke","#03c5ff").attr("stroke-width",2);var w=-10;R.each(function(t,a){var r=a;(a%=4)||(w+=10,c.select(".g"+r).append("text").attr("font-size","16px").attr("fill","#b9d1f0").attr("transform",function(t){return"translate(".concat(t.x,",").concat(t.y,")")}).attr("text-anchor","middle").attr("dominant-baseline","middle").text(w))}),g({group:u,perAngle:i,startAngle:n,R:120,r:h})}()},[]),n(function(){l.datas&&function(){var t=l.datas,a=y.group,r=y.perAngle,n=y.startAngle,e=y.R,i=y.r,s=n+r*(t.value/10*4),p=o().innerRadius(0).outerRadius(e);a.append("path").attr("d",function(){return p({startAngle:n,endAngle:s})}).attr("fill","url(#myRadialGradient)"),a.append("text").attr("fill","#fff").attr("font-size","14px").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("dy",20).text(t.name),a.append("text").attr("fill","url(#myGradient)").attr("font-size","48px").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("dy",-15).text(t.value).append("tspan").attr("fill","#fff").attr("font-size",14).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("dx",5).text("%"),a.append("path").attr("id","arrow").attr("d",function(){var t=f(s)*(e+30),a=-d(s)*(e+30),r=f(s-c(2))*(i-30),n=-d(s-c(2))*(i-30),o=f(s+c(2))*(i-30),l=-d(s+c(2))*(i-30);return"M".concat(t,",").concat(a,"L").concat(r,",").concat(n,"L").concat(o,",").concat(l,"Z")}).attr("fill","#fff")}()},[l.datas]),t.createElement("div",{ref:p,style:{position:"absolute",top:l.top,left:l.left}})}
