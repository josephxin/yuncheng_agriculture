/* eslint-disable */
import t,{useRef as n,useState as e,useEffect as r}from"react";import{select as a,pie as l,arc as i}from"d3";function o(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,a=!1,l=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done)&&(e.push(i.value),!n||e.length!==n);r=!0);}catch(t){a=!0,l=t}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}export default function(u){var c=n(null),d=o(e(null),2),f=d[0],s=d[1];return r(function(){!function(){var t=c.current,n=u.width||300,e=u.height||300,r=a(t).append("svg").attr("width",n).attr("height",e),l=r.append("g").attr("transform","translate(".concat(n/2,",").concat(e/2,")"));s({svg:r,group:l})}()},[]),r(function(){!function(){var t=u.datas;if(t){var n=f.svg,e=f.group,r=u.colors,o=function(t,n,e,r){return i().innerRadius(t).outerRadius(n).startAngle(e).endAngle(r).padAngle(.03)},c=l().value(function(t){return t.value})(t);c.sort(function(t,n){return n.value-t.value});var d=e.selectAll("g").data(c).enter().append("g").attr("class",function(t,n){return"g"+n});d.append("path").attr("d",function(t){return o(60,80,t.startAngle,t.endAngle)()}).attr("fill",function(t,n){return r[n]});var s=function(t,n){var e=n.append("g").attr("class","in_g");e.append("path").attr("d",function(){return o(60,90,t.startAngle,t.endAngle)()}).attr("fill","rgba(9,104,206,.5)"),e.append("text").attr("fill","#00deff").attr("font-size","24px").attr("text-anchor","middle").attr("dominant-baseline","middle").text(t.value+"%"),e.append("text").attr("fill","#fff").attr("font-size","14px").attr("dy",30).attr("text-anchor","middle").attr("dominant-baseline","middle").text(t.data.name)};s(c[0],n.select(".g0")),d.on("mouseenter",function(t){n.select(".in_g")&&n.select(".in_g").remove(),s(t,a(this)),u.selected instanceof Function&&u.selected.call(null,t.value)})}}()},[u.datas]),t.createElement("div",null,t.createElement("div",{ref:c,style:{position:"absolute",top:u.top||0,left:u.left||0}}))}
